<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ads Click Pay — Panda Technic</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-1: linear-gradient(180deg,#071127 0%,#071b2a 100%);
    --card: rgba(255,255,255,0.04);
    --muted: #9fb3c8;
    --accent: #06b6d4;
    --accent-2: #ffb547;
  }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
  body{background-image: url('https://images.unsplash.com/photo-1504711434969-e33886168f5c?auto=format&fit=crop&w=1600&q=80');background-size:cover;background-position:center;color:#e6eef6;display:flex;align-items:center;justify-content:center;padding:18px;}
  .app {
    width:100%; max-width:480px; height:92vh; background:rgba(3,10,20,0.6); border-radius:16px; box-shadow:0 10px 40px rgba(2,6,12,0.6);
    display:flex; flex-direction:column; overflow:hidden; border: 1px solid rgba(255,255,255,0.04);
  }
  header{display:flex;align-items:center;gap:12px;padding:18px 20px;border-bottom:1px solid rgba(255,255,255,0.02)}
  .logo{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,#0ea5a3,#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:700;color:#022; font-size:20px}
  h1{font-size:18px;margin:0}
  .subtitle{font-size:12px;color:var(--muted)}
  main{padding:14px;flex:1;overflow:auto}
  nav{display:flex;gap:8px;padding:8px;background:transparent}
  .tabBtn{flex:1;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);color:var(--muted);border:none;cursor:pointer;font-weight:600}
  .tabBtn.active{background:linear-gradient(90deg,#042b3a,#082535);color:#e6eef6}
  .panel{margin-top:12px}
  .card{background:var(--card);padding:12px;border-radius:12px;margin-bottom:12px;border:1px solid rgba(255,255,255,0.02)}
  .balance{display:flex;justify-content:space-between;align-items:center}
  .bal-amount{font-size:20px;font-weight:700;color:#fff}
  .small{font-size:13px;color:var(--muted)}
  .actions{display:flex;gap:8px;margin-top:10px}
  .btn{padding:10px 12px;border-radius:9px;border:none;cursor:pointer;font-weight:700}
  .btn.primary{background:linear-gradient(90deg,#084b57,#07a6b7);color:#042026}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
  .btn.warn{background:linear-gradient(90deg,#ffb547,#ff8a00);color:#2b1600}
  .input{width:100%;padding:10px;border-radius:8px;border:none;margin-top:8px}
  .tasks-list{display:flex;flex-direction:column;gap:10px}
  .taskRow{display:flex;align-items:center;justify-content:space-between;gap:10px}
  .refBox{display:flex;gap:8px;align-items:center}
  .history-list{max-height:180px;overflow:auto}
  footer{padding:10px 16px;border-top:1px solid rgba(255,255,255,0.02);font-size:12px;color:var(--muted);text-align:center}

  /* Modal register */
  .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:30}
  .modal{background:linear-gradient(180deg,#021428,#03202a);padding:18px;border-radius:12px;width:92%;max-width:420px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 30px rgba(0,0,0,0.6)}
  .modal h3{margin:0 0 10px 0}
  .muted{color:var(--muted);font-size:13px}

  /* responsive */
  @media (max-width:420px){ .logo{width:44px;height:44px;font-size:18px} .bal-amount{font-size:18px} .app{height:94vh}}
</style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="logo">ACP</div>
      <div>
        <h1>Ads Click Pay</h1>
        <div class="subtitle">Panda Technic — Earn by watching ads & joining channels</div>
      </div>
    </header>

    <main>
      <nav id="nav">
        <button class="tabBtn active" data-tab="earn">Earn</button>
        <button class="tabBtn" data-tab="tasks">Tasks</button>
        <button class="tabBtn" data-tab="ref">Referral</button>
        <button class="tabBtn" data-tab="withdraw">Withdraw</button>
        <button class="tabBtn" data-tab="profile">Profile</button>
      </nav>

      <!-- Panels -->
      <section id="earn" class="panel">
        <div class="card balance">
          <div>
            <div class="small">Your balance</div>
            <div class="bal-amount" id="balance">$0.00000</div>
            <div class="small">Clicks & Captchas update instantly</div>
          </div>
          <div style="text-align:right">
            <div class="small">Invite code</div>
            <div class="small" id="inviteCode">PT-0000</div>
          </div>
        </div>

        <div class="card">
          <div style="font-weight:700;margin-bottom:8px">Click Ads — $0.0001 each</div>
          <div class="small">Click any ad button to open the ad (Adsterra). When you return, your balance is credited.</div>
          <div class="actions" style="margin-top:10px">
            <button class="btn primary" onclick="openAd('https://www.revenuecpmgate.com/yc4zy360?key=668ce693eb60fa7cc11dd002b6a3adab')">Open Ad 1</button>
            <button class="btn primary" onclick="openAd('https://www.revenuecpmgate.com/ds7h6p686?key=1f2f476c9ca95b3a721183aac2890d9a')">Open Ad 2</button>
          </div>
          <div class="actions" style="margin-top:8px">
            <button class="btn primary" onclick="openAd('https://www.revenuecpmgate.com/r9fnmmre1?key=26bdfcbc52f583dbc0080aedcc0b6131')">Open Ad 3</button>
            <button class="btn ghost" onclick="showCaptcha()">Go to CAPTCHA</button>
          </div>
        </div>

        <div class="card" id="captchaCard">
          <div style="font-weight:700;margin-bottom:8px">CAPTCHA — $0.00015</div>
          <div class="small">Solve the CAPTCHA below to claim. Submission will open an ad link.</div>
          <div style="margin-top:10px">
            <div id="captchaCode" style="font-weight:700;font-size:20px;letter-spacing:3px"></div>
            <input id="captchaInput" class="input" placeholder="Type the code here"/>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button class="btn primary" onclick="verifyCaptcha()">Submit CAPTCHA</button>
              <button class="btn ghost" onclick="regenCaptcha()">Regenerate</button>
            </div>
            <div id="captchaMsg" class="small" style="margin-top:8px"></div>
          </div>
        </div>
      </section>

      <section id="tasks" class="panel" style="display:none">
        <div class="card">
          <div style="font-weight:700">Telegram Tasks — $0.01 each</div>
          <div class="small">Tap Join → join the channel → come back and press Claim</div>
          <div class="tasks-list" style="margin-top:10px">
            <div class="taskRow card" id="task_binanance">
              <div>
                <div style="font-weight:700">Binanance Earn</div>
                <div class="small">https://t.me/binananceearn1</div>
              </div>
              <div style="display:flex;flex-direction:column;gap:8px">
                <button class="btn ghost" onclick="joinChannel('binanance','https://t.me/binananceearn1','task_binanance')">Join</button>
                <button class="btn primary" id="claim_task_binanance" onclick="claimTask('task_binanance')" style="display:none">Claim</button>
              </div>
            </div>

            <div class="taskRow card" id="task_emoney">
              <div>
                <div style="font-weight:700">E-Money Web</div>
                <div class="small">https://t.me/emoneyweb</div>
              </div>
              <div style="display:flex;flex-direction:column;gap:8px">
                <button class="btn ghost" onclick="joinChannel('emoney','https://t.me/emoneyweb','task_emoney')">Join</button>
                <button class="btn primary" id="claim_task_emoney" onclick="claimTask('task_emoney')" style="display:none">Claim</button>
              </div>
            </div>

            <div class="taskRow card" id="task_panda">
              <div>
                <div style="font-weight:700">Panda Technic</div>
                <div class="small">https://t.me/panda_technic</div>
              </div>
              <div style="display:flex;flex-direction:column;gap:8px">
                <button class="btn ghost" onclick="joinChannel('panda','https://t.me/panda_technic','task_panda')">Join</button>
                <button class="btn primary" id="claim_task_panda" onclick="claimTask('task_panda')" style="display:none">Claim</button>
              </div>
            </div>

          </div>
        </div>
      </section>

      <section id="ref" class="panel" style="display:none">
        <div class="card">
          <div style="font-weight:700">Referral</div>
          <div class="small">Share your referral link. You earn $0.01 per referral (credited at their registration).</div>
          <div style="margin-top:10px" class="refBox">
            <input id="refLink" class="input" readonly style="flex:1"/>
            <button class="btn ghost" onclick="copyRef()">Copy</button>
          </div>
        </div>
      </section>

      <section id="withdraw" class="panel" style="display:none">
        <div class="card">
          <div style="font-weight:700">Withdraw</div>
          <div class="small">Minimum withdraw: $0.03 (USDT)</div>
          <input id="withdrawAmount" class="input" type="number" placeholder="Amount (e.g. 0.03)"/>
          <select id="withdrawMethod" class="input">
            <option value="binance">Binance ID</option>
            <option value="pol">POL Coin Address</option>
          </select>
          <input id="withdrawWallet" class="input" placeholder="Enter wallet / Binance ID"/>
          <div style="display:flex;gap:8px; margin-top:8px">
            <button class="btn warn" onclick="requestWithdraw()">Request Withdraw</button>
            <button class="btn ghost" onclick="clearWithdrawHistory()">Clear History</button>
          </div>
          <div style="margin-top:12px">
            <div style="font-weight:700">Withdraw History</div>
            <div id="withdrawHistory" class="history-list small" style="margin-top:8px"></div>
          </div>
        </div>
      </section>

      <section id="profile" class="panel" style="display:none">
        <div class="card">
          <div style="font-weight:700">Profile</div>
          <div class="small">User: <span id="profileName"></span></div>
          <div class="small">User ID: <span id="profileId"></span></div>
          <div class="small">Wallet: <span id="profileWallet"></span></div>
          <div style="margin-top:10px">
            <button class="btn ghost" onclick="logoutUser()">Logout</button>
            <button class="btn ghost" onclick="openRegister(true)">Edit Profile</button>
          </div>
        </div>
      </section>

    </main>

    <footer>Ads Click Pay — Panda Technic · Demo (localStorage)</footer>
  </div>

  <!-- Register modal -->
  <div id="modal" class="modal-back" style="display:none">
    <div class="modal">
      <h3>Welcome — Register</h3>
      <div class="muted">Create your account to save balance, tasks & withdraws on this device.</div>
      <div style="margin-top:12px">
        <input id="regName" class="input" placeholder="Display name (required)"/>
        <input id="regWallet" class="input" placeholder="Binance ID or POL address (optional)"/>
        <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
          <button class="btn primary" onclick="registerUser()">Register</button>
          <button class="btn ghost" onclick="skipRegister()">Skip</button>
        </div>
        <div class="muted" style="margin-top:8px;font-size:13px">If you arrived via referral link, the referrer will receive credit after you register.</div>
      </div>
    </div>
  </div>

<script>
/* ---------------------------
  Data model in localStorage:
  - currentUserId (string)
  - users : JSON object mapping userId -> {name,wallet,balance,tasks:{...},withdraws:[...],inviteCode}
----------------------------*/

// --- helper utilities
function uid(len=8){ return Math.random().toString(36).substring(2,2+len) }

// load or create users store
let users = JSON.parse(localStorage.getItem('users')||'{}');
let currentUserId = localStorage.getItem('currentUserId') || null;

// if first time show register
function openRegister(edit=false){
  document.getElementById('modal').style.display='flex';
  if(edit && currentUserId && users[currentUserId]){
    document.getElementById('regName').value = users[currentUserId].name || '';
    document.getElementById('regWallet').value = users[currentUserId].wallet || '';
  } else {
    document.getElementById('regName').value = '';
    document.getElementById('regWallet').value = '';
  }
}

// allow skipping registration (still create ephemeral user)
function skipRegister(){
  if(!currentUserId){
    const id = 'guest_'+uid(6);
    users[id] = { name: 'Guest', wallet:'', balance:0, tasks:{}, withdraws:[], inviteCode: 'PT-'+Math.floor(1000+Math.random()*9000) };
    currentUserId = id;
    localStorage.setItem('users', JSON.stringify(users));
    localStorage.setItem('currentUserId', currentUserId);
  }
  document.getElementById('modal').style.display='none';
  refreshUI();
}

// register new user
function registerUser(){
  const name = document.getElementById('regName').value.trim();
  const wallet = document.getElementById('regWallet').value.trim();
  if(!name){ alert('Please provide a display name'); return; }
  // if already logged in editing
  if(currentUserId && users[currentUserId] && users[currentUserId].name !== 'Guest' && document.getElementById('modal').dataset.edit === 'true'){
    users[currentUserId].name = name;
    users[currentUserId].wallet = wallet;
  } else {
    // create user id
    const id = 'u_'+uid(8);
    const invite = 'PT-' + Math.floor(1000 + Math.random()*9000);
    users[id] = { name, wallet, balance:0, tasks:{}, withdraws:[], inviteCode:invite };
    currentUserId = id;
    // referral credit if ?ref= present and refers other user id exists
    const params = new URLSearchParams(location.search);
    const ref = params.get('ref');
    if(ref && users[ref]){
      users[ref].balance = (users[ref].balance || 0) + 0.01;
      // also add withdraw record to ref? We'll add simple note
      users[ref].withdraws = users[ref].withdraws || [];
      users[ref].withdraws.unshift(`Referral bonus from ${name} (+$0.01)`);
      alert('Referral credited to inviter.');
    }
    localStorage.setItem('users', JSON.stringify(users));
    localStorage.setItem('currentUserId', currentUserId);
  }
  // save
  localStorage.setItem('users', JSON.stringify(users));
  document.getElementById('modal').style.display='none';
  refreshUI();
}

// logout user (clear current user choice)
function logoutUser(){
  localStorage.removeItem('currentUserId');
  currentUserId = null;
  alert('Logged out. You will be asked to register again.');
  openRegister();
}

/* --- UI logic & initialization --- */

function ensureUser(){
  users = JSON.parse(localStorage.getItem('users')||'{}');
  currentUserId = localStorage.getItem('currentUserId') || null;
  if(!currentUserId){
    openRegister();
  } else if(!users[currentUserId]){
    // if stored id not in users, clear and prompt register
    localStorage.removeItem('currentUserId');
    currentUserId = null;
    openRegister();
  } else {
    refreshUI();
  }
}

// refresh UI elements from current user
function refreshUI(){
  users = JSON.parse(localStorage.getItem('users')||'{}');
  if(!currentUserId || !users[currentUserId]) return;
  const u = users[currentUserId];
  // balance
  document.getElementById('balance').innerText = '$' + ((u.balance||0).toFixed(5));
  document.getElementById('inviteCode').innerText = u.inviteCode || '';
  // profile
  document.getElementById('profileName').innerText = u.name || '';
  document.getElementById('profileId').innerText = currentUserId;
  document.getElementById('profileWallet').innerText = u.wallet || '—';
  // referral link
  const link = location.origin + location.pathname + '?ref=' + currentUserId;
  document.getElementById('refLink').value = link;
  // tasks
  ['task_binanance','task_emoney','task_panda'].forEach(k=>{
    const el = document.getElementById(k);
    if(u.tasks && u.tasks[k]){
      if(el) el.innerHTML = '<div style="color:#88ff88;font-weight:700">✅ Completed</div>';
    }
  });
  // withdraw history
  const histEl = document.getElementById('withdrawHistory');
  histEl.innerHTML = '';
  if(u.withdraws && u.withdraws.length){
    u.withdraws.forEach(r=>{
      const d = document.createElement('div'); d.className='small'; d.style.marginBottom='6px'; d.innerHTML = r;
      histEl.appendChild(d);
    });
  } else {
    histEl.innerHTML = '<div class="small">No withdraw records</div>';
  }
  // balance display in captcha card
  document.getElementById('captchaMsg').innerText = '';
}

// navigation tabs
document.querySelectorAll('.tabBtn').forEach(btn=>{
  btn.addEventListener('click', (e)=>{
    document.querySelectorAll('.tabBtn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const tab = btn.dataset.tab;
    document.querySelectorAll('.panel').forEach(p=>p.style.display='none');
    document.getElementById(tab).style.display='block';
    if(tab === 'withdraw') loadWithdrawHistoryUI();
  });
});

// open ad: keep behavior same — open link & credit $0.0001 (immediate)
function openAd(url){
  window.open(url,'_blank');
  creditCurrentUser(0.0001,'Ad click +$0.0001');
}

// captcha functions (only in earn tab)
function randCaptcha(len=6){
  const chars='ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  let s='';
  for(let i=0;i<len;i++) s+=chars.charAt(Math.floor(Math.random()*chars.length));
  return s;
}
let currentCaptcha='';
function regenCaptcha(){ currentCaptcha = randCaptcha(6); document.getElementById('captchaCode').innerText = currentCaptcha; }
regenCaptcha();

function showCaptcha(){ document.getElementById('nav').querySelector('[data-tab="earn"]').click(); }

function verifyCaptcha(){
  const val = (document.getElementById('captchaInput').value||'').trim().toUpperCase();
  if(!val){ alert('Enter the CAPTCHA code'); return; }
  if(val === currentCaptcha){
    // credit and open ad link (as requested)
    creditCurrentUser(0.00015,'CAPTCHA +$0.00015');
    // open adsterra link when captcha submitted
    window.open('https://www.revenuecpmgate.com/yc4zy360?key=668ce693eb60fa7cc11dd002b6a3adab','_blank');
    document.getElementById('captchaMsg').innerText = 'CAPTCHA correct — credited!';
    document.getElementById('captchaInput').value = '';
    regenCaptcha();
  } else {
    document.getElementById('captchaMsg').innerText = 'Incorrect CAPTCHA — try again';
  }
}

// tasks: join -> show claim button
function joinChannel(name,url,taskId){
  window.open(url,'_blank');
  // show claim button
  const claimBtn = document.getElementById('claim_'+taskId);
  if(claimBtn) claimBtn.style.display = 'inline-block';
  else {
    // fallback: set button visible by id we used earlier
    const id = 'claim_'+taskId;
    const el = document.getElementById(id);
    if(el) el.style.display='inline-block';
  }
}

// claim a task (credit once and remove)
function claimTask(taskId){
  if(!currentUserId){ alert('Please register first'); openRegister(); return; }
  const u = users[currentUserId] || {};
  u.tasks = u.tasks || {};
  if(u.tasks[taskId]){ alert('Already claimed'); return; }
  u.tasks[taskId] = true;
  users[currentUserId] = u;
  localStorage.setItem('users', JSON.stringify(users));
  creditCurrentUser(0.01,'Task '+taskId+' +$0.01');
  // hide the task UI
  const el = document.getElementById(taskId);
  if(el) el.innerHTML = '<div style="color:#88ff88;font-weight:700">✅ Completed</div>';
}

// credit current user with amount and note
function creditCurrentUser(amount, note){
  users = JSON.parse(localStorage.getItem('users')||'{}');
  if(!currentUserId || !users[currentUserId]){
    alert('No active user — please register.');
    openRegister();
    return;
  }
  users[currentUserId].balance = (users[currentUserId].balance || 0) + amount;
  users[currentUserId].withdraws = users[currentUserId].withdraws || [];
  users[currentUserId].withdraws.unshift(`${note} — ${new Date().toLocaleString()}`);
  localStorage.setItem('users', JSON.stringify(users));
  refreshUI();
}

// Withdraw flow
function requestWithdraw(){
  const amtStr = document.getElementById('withdrawAmount').value;
  const amt = parseFloat(amtStr);
  const wallet = document.getElementById('withdrawWallet').value.trim();
  const method = document.getElementById('withdrawMethod').value;
  if(!currentUserId || !users[currentUserId]){ alert('Register first'); openRegister(); return; }
  if(isNaN(amt) || amt < 0.03){ alert('Minimum withdraw is $0.03'); return; }
  if(!wallet){ alert('Enter wallet / Binance ID'); return; }
  const u = users[currentUserId];
  if((u.balance||0) < amt){ alert('Insufficient balance'); return; }
  // subtract
  u.balance = (u.balance||0) - amt;
  u.withdraws = u.withdraws || [];
  const rec = `Withdraw $${amt.toFixed(2)} via ${method} — ${wallet} (${new Date().toLocaleString()})`;
  u.withdraws.unshift(rec);
  users[currentUserId] = u;
  localStorage.setItem('users', JSON.stringify(users));
  // send to bot/channel
  // NOTE: bot token & chat id used as provided earlier by you
  const BOT_TOKEN = '7437326664:AAGpM5JQ6gHgJ0dpyhQHD-2-XoRE9dcsfaI';
  const CHAT_ID = '@payment1267';
  fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ chat_id: CHAT_ID, text: `📤 Withdraw Request\nUser: ${u.name}\nAmount: $${amt}\nMethod: ${method}\nWallet: ${wallet}` })
  }).catch(e => { console.log('telegram error', e); });
  refreshUI();
  alert('Withdraw requested — check channel for notification.');
  loadWithdrawHistoryUI();
  // clear inputs
  document.getElementById('withdrawAmount').value='';
  document.getElementById('withdrawWallet').value='';
}

// load withdraw history UI
function loadWithdrawHistoryUI(){
  if(!currentUserId || !users[currentUserId]) return;
  const u = users[currentUserId];
  const container = document.getElementById('withdrawHistory');
  container.innerHTML = '';
  if(u.withdraws && u.withdraws.length){
    u.withdraws.forEach(s=>{
      const d = document.createElement('div'); d.className='small'; d.style.marginBottom='6px'; d.innerHTML = s;
      container.appendChild(d);
    });
  } else {
    container.innerHTML = '<div class="small">No withdraw history yet</div>';
  }
}

// clear withdraw history for this user
function clearWithdrawHistory(){
  if(!currentUserId || !users[currentUserId]) return;
  if(!confirm('Clear withdraw history?')) return;
  users[currentUserId].withdraws = [];
  localStorage.setItem('users', JSON.stringify(users));
  loadWithdrawHistoryUI();
}

// referral copy
function copyRef(){
  const txt = document.getElementById('refLink').value;
  navigator.clipboard.writeText(txt);
  alert('Referral link copied');
}

// logics on page load
(function init(){
  // load users store
  users = JSON.parse(localStorage.getItem('users')||'{}');
  currentUserId = localStorage.getItem('currentUserId') || null;
  // if currentUserId exists but missing on users, reset
  if(currentUserId && !users[currentUserId]){ currentUserId = null; localStorage.removeItem('currentUserId'); }
  if(!currentUserId){
    // if no current user, show register modal
    openRegister();
  } else {
    refreshUI();
  }
  // bind nav id to allow direct showCaptcha calls
  document.getElementById('nav')?.querySelectorAll('.tabBtn')?.forEach(()=>{});
  // set invite code if user exists
  if(currentUserId && users[currentUserId]) {
    document.getElementById('inviteCode').innerText = users[currentUserId].inviteCode || '';
    document.getElementById('refLink').value = location.origin + location.pathname + '?ref=' + currentUserId;
  }
  // show claim buttons if previously pressed join (we just keep as manual)
  // keyboard ENTER trigger
  document.getElementById('captchaInput').addEventListener('keyup', (e)=>{ if(e.key==='Enter') verifyCaptcha(); });
  // register modal editing flag when editing profile
  document.querySelectorAll('[data-edit="true"]').forEach(i=>i.onclick=openRegister);
})();
</script>
</body>
</html>
