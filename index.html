<!DOCTYPE html>  <html lang="si">  
<head>  
<meta charset="utf-8" />  
<meta name="viewport" content="width=device-width,initial-scale=1" />  
<title>Ads Click Pay — Panda Technic (Telegram WebApp)</title>  
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">  
<style>  
:root{ --muted:#9fb3c8; --accent:#06b6d4; --accent-2:#ffb547; --card-bg: rgba(255,255,255,0.04); --glass: rgba(255,255,255,0.03);}  
*{box-sizing:border-box}  
html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial; background:#031021;}  
/* background image (keeps original look) */  
body{  
  background-image:url('https://images.unsplash.com/photo-1504711434969-e33886168f5c?auto=format&fit=crop&w=1600&q=80');  
  background-size:cover;background-position:center;color:#e6eef6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;  
}  
body::before{content:"";position:fixed;inset:0;background:linear-gradient(rgba(2,6,12,0.7), rgba(3,10,20,0.7));z-index:0;}  .app{ position:relative; z-index:1; max-width:520px;margin:24px auto;height:94vh;border-radius:14px; overflow:hidden;
display:flex; flex-direction:column; border:1px solid rgba(255,255,255,0.03); box-shadow:0 12px 40px rgba(0,0,0,0.6); background:linear-gradient(180deg, rgba(2,6,12,0.3), rgba(2,6,12,0.2)); }
header{display:flex;gap:12px;align-items:center;padding:18px 18px;border-bottom:1px solid rgba(255,255,255,0.02);}
.logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#06b6d4,#0ea5a3);display:flex;align-items:center;justify-content:center;font-weight:800;color:#012; font-size:20px}
header h1{margin:0;font-size:18px}
header .sub{color:var(--muted);font-size:13px}

main{padding:14px;flex:1;overflow:auto}
nav.tabs{display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap}
.tabBtn{flex:1;padding:10px;border-radius:10px;background:var(--glass);border:none;color:var(--muted);cursor:pointer;font-weight:700}
.tabBtn.active{background:linear-gradient(90deg,#042b3a,#052d36);color:#e6eef6}

.panel{display:none}
.panel.active{display:block}
.card{background:var(--card-bg);padding:14px;border-radius:12px;margin-bottom:12px;border:1px solid rgba(255,255,255,0.02)}
.small{color:var(--muted);font-size:13px}
.balance{display:flex;justify-content:space-between;align-items:center}
.bal-amt{font-size:20px;font-weight:700}
.invite{font-size:13px;color:var(--muted)}

.actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.btn{padding:10px 12px;border-radius:9px;border:none;cursor:pointer;font-weight:700;color:#042026;background:linear-gradient(90deg,#06b6d4,#0ea5a3)}
.btn.ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04)}
.btn.warn{background:linear-gradient(90deg,#ffb547,#ff8a00);color:#2b1600}
.btn.small{padding:8px 10px;font-size:14px}
input[type="text"], input[type="number"]{width:100%;padding:10px;border-radius:8px;border:none;margin-top:8px;background:rgba(255,255,255,0.02);color:#e6eef6}
select{width:100%;padding:10px;border-radius:8px;border:none;margin-top:8px;background:rgba(255,255,255,0.02);color:#e6eef6}

.taskRow{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:8px;border-radius:8px;background:rgba(255,255,255,0.02)}
.taskRow .meta{flex:1;text-align:left}
.history-list{max-height:220px;overflow:auto;padding:6px}

.modal-back{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:60}
.modal{width:92%;max-width:420px;background:linear-gradient(180deg,#021428,#03202a);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 10px 40px rgba(0,0,0,0.6)}
.muted{color:var(--muted);font-size:13px}
footer{padding:10px;text-align:center;color:var(--muted);font-size:12px;border-top:1px solid rgba(255,255,255,0.02)}
@media (max-width:520px){ .app{margin:10px 10px;height:98vh} header{padding:14px} .logo{width:48px;height:48px} }
</style>

</head>  
<body>  
  <div class="app" id="app">  
    <header>  
      <div class="logo">ACP</div>  
      <div>  
        <h1>Ads Click Pay</h1>  
        <div class="sub">Panda Technic — Earn by watching ads & joining channels</div>  
      </div>  
    </header>  <main>  
  <nav class="tabs" id="nav">  
    <button class="tabBtn active" data-tab="earn">Earn</button>  
    <button class="tabBtn" data-tab="tasks">Tasks</button>  
    <button class="tabBtn" data-tab="ref">Referral</button>  
    <button class="tabBtn" data-tab="withdraw">Withdraw</button>  
    <button class="tabBtn" data-tab="profile">Profile</button>  
  </nav>  

  <!-- EARN -->  
  <section id="earn" class="panel active">  
    <div class="card balance">  
      <div>  
        <div class="small">Your balance</div>  
        <div class="bal-amt" id="balanceDisplay">$0.00000</div>  
        <div class="small">Clicks & Captchas update instantly</div>  
      </div>  
      <div style="text-align:right">  
        <div class="small">Invite code</div>  
        <div class="invite" id="inviteCode">—</div>  
      </div>  
    </div>  

    <div class="card">  
      <strong>Click Ads — $0.0001 each</strong>  
      <div class="small">Click any ad to open (Adsterra). When you return, balance credited immediately.</div>  
      <div class="actions">  
        <button class="btn" onclick="openAd('https://www.revenuecpmgate.com/yc4zy360?key=668ce693eb60fa7cc11dd002b6a3adab')">Open Ad 1</button>  
        <button class="btn" onclick="openAd('https://www.revenuecpmgate.com/ds7h6p686?key=1f2f476c9ca95b3a721183aac2890d9a')">Open Ad 2</button>  
        <button class="btn" onclick="openAd('https://www.revenuecpmgate.com/r9fnmmre1?key=26bdfcbc52f583dbc0080aedcc0b6131')">Open Ad 3</button>  
        <button class="btn ghost" onclick="focusCaptcha()">Go to CAPTCHA</button>  
      </div>  
    </div>  

    <div class="card" id="captchaCard">  
      <strong>CAPTCHA — $0.00015</strong>  
      <div class="small">Solve the CAPTCHA to claim. Submission opens an ad link.</div>  
      <div id="captchaCode" style="margin-top:10px;font-weight:800;font-size:20px;letter-spacing:3px"></div>  
      <input id="captchaInput" type="text" placeholder="Type the code here" />  
      <div class="actions" style="margin-top:8px">  
        <button class="btn" onclick="submitCaptcha()">Submit CAPTCHA</button>  
        <button class="btn ghost" onclick="regenCaptcha()">Regenerate</button>  
      </div>  
      <div id="captchaMsg" class="muted" style="margin-top:8px"></div>  
    </div>  
  </section>  

  <!-- TASKS -->  
  <section id="tasks" class="panel">  
    <div class="card">  
      <strong>Telegram Tasks — $0.01 each</strong>  
      <div class="small">Tap Join → join the channel → then press Claim. One-time per user.</div>  

      <div style="margin-top:12px;display:flex;flex-direction:column;gap:10px">  
        <div id="task_binanance" class="taskRow">  
          <div class="meta">  
            <div style="font-weight:700">Binanance Earn</div>  
            <div class="small">https://t.me/binananceearn1</div>  
          </div>  
          <div style="display:flex;flex-direction:column;gap:6px">  
            <button class="btn ghost small" onclick="joinChannel('task_binanance','https://t.me/binananceearn1')">Join</button>  
            <button class="btn small" id="claim_task_binanance" style="display:none" onclick="claimTask('task_binanance')">Claim</button>  
          </div>  
        </div>  

        <div id="task_emoney" class="taskRow">  
          <div class="meta">  
            <div style="font-weight:700">E-Money Web</div>  
            <div class="small">https://t.me/emoneyweb</div>  
          </div>  
          <div style="display:flex;flex-direction:column;gap:6px">  
            <button class="btn ghost small" onclick="joinChannel('task_emoney','https://t.me/emoneyweb')">Join</button>  
            <button class="btn small" id="claim_task_emoney" style="display:none" onclick="claimTask('task_emoney')">Claim</button>  
          </div>  
        </div>  

        <div id="task_panda" class="taskRow">  
          <div class="meta">  
            <div style="font-weight:700">Panda Technic</div>  
            <div class="small">https://t.me/panda_technic</div>  
          </div>  
          <div style="display:flex;flex-direction:column;gap:6px">  
            <button class="btn ghost small" onclick="joinChannel('task_panda','https://t.me/panda_technic')">Join</button>  
            <button class="btn small" id="claim_task_panda" style="display:none" onclick="claimTask('task_panda')">Claim</button>  
          </div>  
        </div>  
      </div>  
    </div>  
  </section>  

  <!-- REFERRAL -->  
  <section id="ref" class="panel">  
    <div class="card">  
      <strong>Referral</strong>  
      <div class="small">Share your referral link — inviter gets $0.01 when a new user registers using it.</div>  
      <div style="display:flex;gap:8px;margin-top:10px">  
        <input id="refLink" type="text" readonly style="flex:1" />  
        <button class="btn ghost" onclick="copyRef()">Copy</button>  
      </div>  
    </div>  
  </section>  

  <!-- WITHDRAW -->  
  <section id="withdraw" class="panel">  
    <div class="card">  
      <strong>Withdraw</strong>  
      <div class="small">Minimum withdraw: $0.15</div>  
      <input id="withdrawAmount" type="number" placeholder="Amount (USDT)" min="0.15" step="0.01"/>  
      <select id="withdrawMethod">  
        <option value="binance">Binance ID</option>  
        <option value="pol">POL Coin Address</option>  
      </select>  
      <input id="withdrawWallet" type="text" placeholder="Enter Binance ID or POL Address"/>  
      <div style="display:flex;gap:8px;margin-top:10px">  
        <button class="btn warn" onclick="requestWithdraw()">Request Withdraw</button>  
        <button class="btn ghost" onclick="clearWithdrawHistory()">Clear History</button>  
      </div>  

      <div style="margin-top:12px">  
        <div style="font-weight:700">Withdraw History</div>  
        <div id="withdrawHistory" class="history-list small" style="margin-top:8px"></div>  
      </div>  
    </div>  
  </section>  

  <!-- PROFILE -->  
  <section id="profile" class="panel">  
    <div class="card">  
      <strong>Profile</strong>  
      <div class="small" style="margin-top:8px">Name: <span id="profileName">—</span></div>  
      <div class="small">Wallet: <span id="profileWallet">—</span></div>  
      <div class="small">User ID: <span id="profileId">—</span></div>  
      <div style="margin-top:10px;display:flex;gap:8px">  
        <button class="btn ghost" onclick="openRegister(true)">Edit Profile</button>  
        <button class="btn ghost" onclick="logout()">Logout</button>  
      </div>  
    </div>  
  </section>  

</main>  

<footer>Ads Click Pay — Panda Technic · Demo (localStorage)</footer>

  </div>    <!-- Register modal -->    <div id="modal" class="modal-back" style="display:none">  
    <div class="modal">  
      <h3>Create your account</h3>  
      <div class="muted">Register to save balance, tasks & withdraws on this device. If you opened with a referral link, the inviter will be credited after you register.</div>  
      <input id="regName" type="text" placeholder="Display name (required)"/>  
      <input id="regWallet" type="text" placeholder="Binance ID or POL address (optional)"/>  
      <div style="display:flex;gap:8px;margin-top:12px">  
        <button class="btn" onclick="doRegister()">Register</button>  
        <button class="btn ghost" onclick="skipRegister()">Skip (guest)</button>  
      </div>  
    </div>  
  </div>  <script>  
/* ------------------------  
  Finalized frontend (single-file)  
  - preserves all original features  
  - fixes: single doRegister, withdraw min=0.15, profile wallet saved to withdraws,  
           background preserved, referral handling kept, server POST to /api/withdraw  
-------------------------*/  
  
function uid(n=8){ return Math.random().toString(36).substring(2,2+n) }  
function saveUsers(){ localStorage.setItem('users', JSON.stringify(users)); }  
function loadUsers(){ users = JSON.parse(localStorage.getItem('users')||'{}'); }  
  
let users = {};  
let currentUserId = localStorage.getItem('currentUserId') || null;  
let tgInitData = null;  
let tgUser = null;  
  
/* ----- Telegram WebApp init (if available) ----- */  
function tryInitTelegram(){  
  if(window.Telegram && window.Telegram.WebApp){  
    try{  
      const WebApp = window.Telegram.WebApp;  
      WebApp.expand?.();  
      tgInitData = WebApp.initData; // signed  
      if(WebApp.initDataUnsafe && WebApp.initDataUnsafe.user){  
        tgUser = WebApp.initDataUnsafe.user;  
      }  
      WebApp.MainButton?.hide && WebApp.MainButton.hide();  
    }catch(e){ console.warn('Telegram init failed', e); }  
  }  
}  
  
/* ----- Register modal controls ----- */  
function openRegister(edit=false){  
  loadUsers();  
  document.getElementById('modal').style.display = 'flex';  
  if(edit && currentUserId && users[currentUserId]){  
    document.getElementById('regName').value = users[currentUserId].name || '';  
    document.getElementById('regWallet').value = users[currentUserId].wallet || '';  
  } else {  
    if(tgUser && tgUser.first_name){  
      document.getElementById('regName').value = tgUser.first_name + (tgUser.last_name?(' '+tgUser.last_name):'');  
    } else {  
      document.getElementById('regName').value = '';  
    }  
    document.getElementById('regWallet').value = '';  
  }  
}  
  
function skipRegister(){  
  loadUsers();  
  const id = 'guest_'+uid(6);  
  users[id] = { id, name:'Guest', wallet:'', balance:0, tasks:{}, withdraws:[], inviteCode: 'PT-'+Math.floor(1000+Math.random()*9000) };  
  currentUserId = id;  
  saveUsers();  
  localStorage.setItem('currentUserId', currentUserId);  
  document.getElementById('modal').style.display='none';  
  refreshUI();  
}  
  
/* ----- Single doRegister implementation ----- */  
function doRegister(){  
  loadUsers();  
  const name = (document.getElementById('regName').value||'').trim();  
  const wallet = (document.getElementById('regWallet').value||'').trim();  
  if(!name){ alert('Please enter display name'); return; }  
  const id = 'u_'+uid(8);  
  const invite = 'PT-'+Math.floor(1000+Math.random()*9000);  
  users[id] = { id, name, wallet, balance:0, tasks:{}, withdraws:[], inviteCode:invite };  
  
  // referral credit logic  
  const params = new URLSearchParams(location.search);  
  const paramRef = params.get('ref');  
  const pendingRef = localStorage.getItem('pendingRef');  
  const ref = paramRef || pendingRef;  
  if(ref && users[ref]){  
    users[ref].balance = (users[ref].balance || 0) + 0.01;  
    users[ref].withdraws = users[ref].withdraws || [];  
    users[ref].withdraws.unshift(`Referral bonus from ${name} (+$0.01) — ${new Date().toLocaleString()}`);  
    localStorage.removeItem('pendingRef');  
    // optional: notify user  
    // alert('Referrer credited $0.01');  
  }  
  
  currentUserId = id;  
  saveUsers();  
  localStorage.setItem('currentUserId', currentUserId);  
  document.getElementById('modal').style.display='none';  
  refreshUI();  
}  
  
/* ----- logout ----- */  
function logout(){  
  localStorage.removeItem('currentUserId');  
  currentUserId = null;  
  alert('Logged out. You will be asked to register.');  
  openRegister();  
}  
  
/* ----- ensure user present on load ----- */  
function ensureUser(){  
  loadUsers();  
  currentUserId = localStorage.getItem('currentUserId') || null;  
  if(currentUserId && !users[currentUserId]){ currentUserId = null; localStorage.removeItem('currentUserId'); }  
  if(!currentUserId){  
    document.getElementById('modal').style.display='flex';  
  } else {  
    document.getElementById('modal').style.display='none';  
    refreshUI();  
  }  
}  
  
/* ----- refresh UI ----- */  
function refreshUI(){  
  loadUsers();  
  if(!currentUserId || !users[currentUserId]) return;  
  const u = users[currentUserId];  
  document.getElementById('balanceDisplay').innerText = '$' + ((u.balance||0).toFixed(5));  
  document.getElementById('inviteCode').innerText = u.inviteCode || '—';  
  document.getElementById('profileName').innerText = u.name || '—';  
  document.getElementById('profileWallet').innerText = u.wallet || '—';  
  document.getElementById('profileId').innerText = currentUserId;  
  document.getElementById('refLink').value = location.origin + location.pathname + '?ref=' + currentUserId;  
  // tasks UI reflect  
  ['task_binanance','task_emoney','task_panda'].forEach(k=>{  
    const el = document.getElementById(k);  
    if(el){  
      if(u.tasks && u.tasks[k]){  
        el.innerHTML = '<div style="color:#88ff88;font-weight:700">✅ Completed</div>';  
      }  
    }  
  });  
  loadWithdrawHistoryUI();  
}  
  
/* ----- credit user ----- */  
function creditUser(amount, note){  
  loadUsers();  
  if(!currentUserId || !users[currentUserId]){ alert('No active user — please register'); openRegister(); return; }  
  const u = users[currentUserId];  
  u.balance = (u.balance || 0) + amount;  
  u.withdraws = u.withdraws || [];  
  u.withdraws.unshift(`${note} (+$${amount.toFixed(5)}) — ${new Date().toLocaleString()}`);  
  users[currentUserId] = u;  
  saveUsers();  
  refreshUI();  
}  
  
/* ------------- Ads & Captcha ------------- */  
function openAd(url){  
  window.open(url,'_blank');  
  creditUser(0.0001, 'Ad click');  
}  
  
let currentCaptcha = '';  
function regenCaptcha(){  
  const chars='ABCDEFGHJKLMNPQRSTUVWXYZ23456789';  
  let s=''; for(let i=0;i<6;i++) s+=chars.charAt(Math.floor(Math.random()*chars.length));  
  currentCaptcha = s;  
  const el = document.getElementById('captchaCode'); if(el) el.innerText = currentCaptcha;  
  const msg = document.getElementById('captchaMsg'); if(msg) msg.innerText = '';  
}  
regenCaptcha();  
  
function focusCaptcha(){ document.querySelector('[data-tab="earn"]').click(); window.scrollTo({top:0, behavior:'smooth'}); const el=document.getElementById('captchaInput'); if(el) el.focus(); }  
  
function submitCaptcha(){  
  const v = (document.getElementById('captchaInput').value||'').trim().toUpperCase();  
  if(!v){ alert('Enter CAPTCHA'); return; }  
  if(v === currentCaptcha){  
    creditUser(0.00015, 'CAPTCHA');  
    window.open('https://www.revenuecpmgate.com/yc4zy360?key=668ce693eb60fa7cc11dd002b6a3adab','_blank');  
    document.getElementById('captchaMsg').innerText = 'CAPTCHA correct — credited!';  
    document.getElementById('captchaInput').value = '';  
    regenCaptcha();  
  } else {  
    document.getElementById('captchaMsg').innerText = 'Incorrect CAPTCHA — try again';  
  }  
}  
  
/* ------------- Tasks ------------- */  
function joinChannel(taskId, url){  
  window.open(url,'_blank');  
  const claimBtn = document.getElementById('claim_'+taskId);  
  if(claimBtn) claimBtn.style.display = 'inline-block';  
}  
  
function claimTask(taskId){  
  loadUsers();  
  if(!currentUserId || !users[currentUserId]){ openRegister(); return; }  
  const u = users[currentUserId];  
  u.tasks = u.tasks || {};  
  if(u.tasks[taskId]){ alert('Already claimed'); return; }  
  u.tasks[taskId] = true;  
  users[currentUserId] = u;  
  saveUsers();  
  creditUser(0.01, 'Task claim');  
  const el = document.getElementById(taskId);  
  if(el) el.innerHTML = '<div style="color:#88ff88;font-weight:700">✅ Completed</div>';  
}  
  
/* ------------- Withdraw (frontend -> backend) -------------  
  - Minimum withdraw enforced (0.15)  
  - Wallet saved to user's profile when request made  
  - Posts to /api/withdraw (server must forward to Telegram using BOT_TOKEN)  
*/  
async function requestWithdraw(){  
  loadUsers();  
  if(!currentUserId || !users[currentUserId]){ openRegister(); return; }  
  const amt = parseFloat(document.getElementById('withdrawAmount').value || '0');  
  const wallet = (document.getElementById('withdrawWallet').value||'').trim();  
  const method = document.getElementById('withdrawMethod').value;  
  if(isNaN(amt) || amt < 0.15){ alert('Minimum withdraw is $0.15'); return; }  
  const u = users[currentUserId];  
  if((u.balance||0) < amt){ alert('Insufficient balance'); return; }  
  
  // update balance & save wallet to profile  
  u.balance = (u.balance||0) - amt;  
  u.wallet = wallet;  
  u.withdraws = u.withdraws || [];  
  const rec = `Withdraw $${amt.toFixed(2)} via ${method} — ${wallet} (${new Date().toLocaleString()})`;  
  u.withdraws.unshift(rec);  
  users[currentUserId] = u;  
  saveUsers();  
  
  // POST to backend for Telegram notify (backend must exist at /api/withdraw)  
  try{  
    const resp = await fetch('/api/withdraw', {  
      method: 'POST',  
      headers: { 'Content-Type': 'application/json' },  
      body: JSON.stringify({  
        userName: u.name,  
        userId: currentUserId,  
        amount: amt,  
        method,  
        wallet,  
        tgInitData // optional verification info (server may use)  
      })  
    });  
    if(!resp.ok){  
      console.warn('Server responded with', resp.status);  
      alert('Withdraw requested — saved locally, but server notify failed.');  
    } else {  
      alert('Withdraw requested — notification sent to admin.');  
    }  
  }catch(e){  
    console.warn('Withdraw notify error', e);  
    alert('Withdraw requested — saved locally; network error sending notification.');  
  }  
  
  refreshUI();  
  document.getElementById('withdrawAmount').value=''; document.getElementById('withdrawWallet').value='';  
}  
  
function loadWithdrawHistoryUI(){  
  loadUsers();  
  if(!currentUserId || !users[currentUserId]) return;  
  const u = users[currentUserId];  
  const container = document.getElementById('withdrawHistory');  
  container.innerHTML = '';  
  if(u.withdraws && u.withdraws.length){  
    u.withdraws.forEach(r=>{  
      const d = document.createElement('div'); d.className='small'; d.style.marginBottom='8px'; d.innerText = r;  
      container.appendChild(d);  
    });  
  } else {  
    container.innerHTML = '<div class="small">No withdraw history</div>';  
  }  
}  
  
function clearWithdrawHistory(){  
  if(!currentUserId || !users[currentUserId]) return;  
  if(!confirm('Clear withdraw history for this account?')) return;  
  users[currentUserId].withdraws = [];  
  saveUsers();  
  loadWithdrawHistoryUI();  
}  
  
/* ------------- Referral copy ------------- */  
function copyRef(){  
  const v = document.getElementById('refLink').value;  
  navigator.clipboard.writeText(v).then(()=>alert('Referral link copied'));  
}  
  
/* ------------- Tabs & Init ------------- */  
document.querySelectorAll('.tabBtn').forEach(btn=>{  
  btn.addEventListener('click', (e)=>{  
    document.querySelectorAll('.tabBtn').forEach(b=>b.classList.remove('active'));  
    btn.classList.add('active');  
    const tab = btn.dataset.tab;  
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));  
    document.getElementById(tab).classList.add('active');  
    if(tab === 'withdraw') loadWithdrawHistoryUI();  
  });  
});  
  
(function init(){  
  tryInitTelegram();  
  loadUsers();  
  currentUserId = localStorage.getItem('currentUserId') || null;  
  if(currentUserId && !users[currentUserId]){ currentUserId = null; localStorage.removeItem('currentUserId'); }  
  
  // referral handling: store pendingRef param if present  
  const params = new URLSearchParams(window.location.search);  
  const ref = params.get('ref');  
  if(ref) {  
    localStorage.setItem('pendingRef', ref);  
  }  
  
  if(!currentUserId){  
    document.getElementById('modal').style.display='flex';  
  } else {  
    document.getElementById('modal').style.display='none';  
    refreshUI();  
  }  
  regenCaptcha();  
  // expose functions for console/testing  
  window.regenCaptcha = regenCaptcha;  
})();  
window.openAd = openAd;  
window.submitCaptcha = submitCaptcha;  
window.regenCaptcha = regenCaptcha;  
window.joinChannel = joinChannel;  
window.claimTask = claimTask;  
window.requestWithdraw = requestWithdraw;  
window.copyRef = copyRef;  
window.openRegister = openRegister;  
window.skipRegister = skipRegister;  
window.doRegister = doRegister;  
window.logout = logout;  
window.focusCaptcha = focusCaptcha;  
</script>  </body>  
</html>
